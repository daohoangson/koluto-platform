var util = require('util');
var _ = require('underscore')._;

var Tokenizer = function(options) {
    var options = options || {};
    
    this._pattern = new RegExp(/[~`!@#$%\^&\*\(\)\-_=\+\[{\]}\\\|;:'",<.>\/\? …“”]/);
    this._numberPattern = new RegExp(/[0-9]/);
    this._nonNumberPattern = new RegExp(/[^0-9]/);
};

Tokenizer.prototype.tokenize = function(text) {
    var results = text.split(this._pattern);
    
    var numberPattern = this._numberPattern;
    var nonNumberPattern = this._nonNumberPattern;
    
    results = _.filter(results, function(result) {
        var hasNumber = result.match(numberPattern) != null;
        var hasNonNumber = result.match(nonNumberPattern) != null;

        if (hasNumber && hasNonNumber) {
            // we don't take token that mixes
            return false;
        }
        
        return true;
    });

    return _.without(results, '', ' ');
};

module.exports = Tokenizer;